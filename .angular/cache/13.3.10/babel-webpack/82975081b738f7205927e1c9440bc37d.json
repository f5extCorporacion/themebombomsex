{"ast":null,"code":"import { FormGroup, FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../services/perfil-service.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction EmailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nfunction EmailComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"br\");\n    i0.ɵɵelementStart(1, \"button\", 4);\n    i0.ɵɵtext(2, \" Confirmar Codigo \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 5)(4, \"div\", 6)(5, \"div\", 7)(6, \"div\", 8)(7, \"h1\", 9);\n    i0.ɵɵtext(8, \"Modal title\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(9, \"button\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 11);\n    i0.ɵɵtext(11, \" ... \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 12)(13, \"button\", 13);\n    i0.ɵɵtext(14, \"Close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 14);\n    i0.ɵɵtext(16, \"Save changes\");\n    i0.ɵɵelementEnd()()()()();\n  }\n}\n\nfunction EmailComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 15);\n    i0.ɵɵelementStart(1, \"button\", 16);\n    i0.ɵɵtext(2, \" Confirmar codigo\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let EmailComponent = /*#__PURE__*/(() => {\n  class EmailComponent {\n    constructor(http, service) {\n      this.http = http;\n      this.service = service;\n      this.condition = false;\n      this.code = this.random();\n      this.myForm = new FormGroup({\n        email: new FormControl(''),\n        codigo: new FormControl(this.code)\n      });\n    }\n\n    ngOnInit() {\n      this.random();\n      this.service.consultaEmail().subscribe(re => {\n        this.data = re;\n        console.log(re);\n      });\n    }\n\n    openData() {\n      this.condition = true;\n    }\n\n    random() {\n      return Math.floor(Math.random() * (9999 - 999 + 1) + 999);\n    }\n\n    SendEmail() {\n      let params = {\n        email: this.myForm.value.email,\n        codigo: this.myForm.value.codigo\n      };\n      const filtered = this.data.filter(function (element) {\n        return element;\n      });\n      console.log(filtered);\n\n      if (filtered != \"\") {\n        alert(\" ya tienes correo registrado\");\n      } else {\n        this.condition = false;\n        let isBoss = confirm(\"¿Deseas guardar Este correo?\");\n\n        if (isBoss == true) {\n          //send\n          this.http.post('http://localhost:3000/send', params).subscribe(res => {\n            console.log(res);\n          });\n          console.log(this.myForm.value);\n        } else {\n          alert(\"SE CANCELO  ACCION\");\n        }\n      }\n\n      window.location.reload();\n    }\n\n  }\n\n  EmailComponent.ɵfac = function EmailComponent_Factory(t) {\n    return new (t || EmailComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.PerfilServiceService));\n  };\n\n  EmailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EmailComponent,\n    selectors: [[\"app-email\"]],\n    decls: 6,\n    vars: 3,\n    consts: [[1, \"container\"], [4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"thenBlock\", \"\"], [\"elseBlock\", \"\"], [\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#exampleModal\", 1, \"btn\", \"btn-primary\"], [\"id\", \"exampleModal\", \"tabindex\", \"-1\", \"aria-labelledby\", \"exampleModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"exampleModalLabel\", 1, \"modal-title\", \"fs-5\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"], [\"src\", \"https://www.f5ext.com/hermosas.png\", \"width\", \"333 px\"], [1, \"btn\", \"btn-success\"]],\n    template: function EmailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, EmailComponent_div_1_Template, 1, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, EmailComponent_ng_template_2_Template, 17, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(4, EmailComponent_ng_template_4_Template, 3, 0, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(3);\n\n        const _r3 = i0.ɵɵreference(5);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.condition)(\"ngIfThen\", _r1)(\"ngIfElse\", _r3);\n      }\n    },\n    directives: [i3.NgIf],\n    styles: [\"\"]\n  });\n  return EmailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}